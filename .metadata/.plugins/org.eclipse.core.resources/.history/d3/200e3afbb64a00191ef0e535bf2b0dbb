import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
import java.util.Scanner;

public class ObjectCreator {
	private Object object;
	private Class classObject;
	Scanner input;
	
	public boolean displayObjectSelections(int currentObjectNumber) {
		int selection = 0;
		boolean doneWithObject = false;
		input = new Scanner(System.in);
		
		while(doneWithObject != true){
			System.out.println("OBJECT #" + currentObjectNumber);
			if(currentObjectNumber != 1){
				System.out.println("Would you like to create another object?");
			}
			System.out.print(
					"Please choose an object\n" +
					"1) Library Object\n" +
					"2) Book Object\n" +
					"3) Owner Object\n" +
					"Enter the number here please : ");
				selection = input.nextInt();
				System.out.println(selection);
				input.nextLine(); // to stop input skipping
				if(selection == 1)
				{
					object = new Library();
					classObject = object.getClass();
					fieldsSelections();
				}else if(selection == 2) {
					object = new Book();
					classObject = object.getClass();
					fieldsSelections();
				}else if(selection == 3) {
					object = new Owner();
					classObject = object.getClass();
					fieldsSelections();
				}else {
					doneWithObject = false;
				}
				
		}
		input.close();
		
		return doneWithObject;
	}


	private void fieldsSelections() {
		String changeFieldValueString;
		boolean more = true;
		
		while(more == true)
		{
			System.out.println("########################################");
			System.out.println("Would you like to change any of the object's field value?"
								+ "Enter \"YES\" OR \"NO\" please!");
			changeFieldValueString = input.nextLine();
			input.nextLine(); 
			if(changeFieldValueString.equals("YES")){
				Field chosen = fieldOptions();
				if(chosen != null)
				{
					changeField(chosen);
				}
			}else if(changeFieldValueString.equals("NO")){
				more = false;
			}else {
				System.out.println("Please enter all upper case letter for \"YES\" OR \"NO\" please!");
				more = false;
			}
		}
	}
	
	
	private Field fieldOptions()
	{
		Field fieldArray[] = classObject.getDeclaredFields(); 
		Field chosen = null;
		int selection = -1 ;
		
		System.out.println("Please choose a field from below");
		for(int i = 0; i < fieldArray.length; i++)
		{
			System.out.println( i+1 + ") " + fieldArray[i].getName() + "\n");
		}
		
		while(selection == -1)
		{
			System.out.print("Enter the number here please : ");
			if(input.hasNextLine())
			{
				selection = input.nextInt();
				input.nextLine();
				chosen = fieldArray[selection-1];
			}
		}
		return chosen;
	}
	
	
	private void changeField(Field chosen)
	{
		String changeTo = null;
		int valueEntered = 0;
		
		System.out.println("You choose " + chosen.getName() 
		+ "\nType: " + chosen.getType() 
		+ "\nModifier: " + Modifier.toString(chosen.getModifiers()));
		while(valueEntered == 0)
		{
			System.out.print("Enter new value: ");
			if(input.hasNextLine()){
				changeTo = input.nextLine();
				input.nextLine();
				
				//check the kind of input
				if(chosen.getType() == Integer.class){
					try {
						chosen.setInt(object, Integer.parseInt(changeTo));
						valueEntered = 1;
					} catch (NumberFormatException e) {
						System.out.println("Number Format error");
					} catch (IllegalArgumentException e) {
						System.out.println("Illegal Argument error");
					} catch (IllegalAccessException e) {
						System.out.println("Illegal Access error");
					}
				}else if(chosen.getType().isArray()){
					//if primitive, ask for index
					
					//if object ask for index
					
				}else{
					//is just an object
					
				}
				

				
				
				System.out.println("HAS NEXT LINE");
			}
		}
	}

	
	
}
